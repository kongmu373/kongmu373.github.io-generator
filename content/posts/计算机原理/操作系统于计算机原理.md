---
title: "操作系统于计算机原理"
date: 2020-07-13T08:47:04+08:00
draft: true
tags: ["计算机原理"]
series: ["计算机原理"]
categories: ["计算机原理"]
---


## 计算机体系原理
-----

### CPU,寄存器,内存与汇编指令
+ CPU:相当于人的大脑，通过执行来自内存的指令，来控制整个电脑稳定的运行。
+ 寄存器：临时存储,进行数据的存储，就是你的口袋
+ 内存: 也是进行数据的存储，但是比寄存器要慢，就是你的背包
+ 汇编指令: 是助记符，因为人要自己去记机器码实在太伤了，所以用一些稍微好看的的符号记一下
+ 冯·诺依曼结构的核心思想:
  + 程序、数据的最终形态都是二进制编码
  + 程序、数据和指令序列，都是事先存在主（内）存储器中
  + 确定了计算机的五个基本组成部分：运算器、控制器、存储器、输入设备、输出设备
  ![五个基本组成部分](https://pic2.zhimg.com/v2-8b5b6ff186ebb7deef6905aa71c48261_b.jpg)

### 程序的装载和运行
+ 物理和虚拟寻址
  + 物理寻址，就是实际在硬件上的绝对地址
  + 虚拟寻址，所有应用程序内存访问都会转到页表，然后该表会从虚拟地址映射到物理地址
  + 每个程序都有自己独立的虚拟地址空间
    + 和其他程序互不干扰
    + 可能方便地放在物理内存的任何区域

### 程序的分时复用
> 完成一个时令周期 CPU >> memory >> IO, 所以需要分时复用

+ 每个程序轮流占用CPU的时间片 (进程/线程)
+ 何时放弃CPU?
  + 程序的时间片到了
  + 请求慢速设备
  + CPU需要响应中断
+ 上下文切换:
  + 上下文: 程序运行的环境(寄存器, 程序计数器PC)
  + 放弃CPU，保存上下文
  + 拥有CPU, 恢复上下文


### 什么是操作系统?
+ 欺上瞒下:
  + 对上层提供统一的API，简化应用开发逻辑
  + 对下层通过硬件驱动提供兼容性
+ 例如:
  + 通过Windows的CreateProcessA方法创建新的进程
  + 通过Unix的fork系统调用创建新的进程

## 线程与进程
+ 共同点:
  + 都拥有独立的PC,可以独立地执行程序
  + 在Linux上甚至用同一种数据结构处理进程和线程
+ 不同点：
  + 进程: 拥有独立的内存地址空间，文件等资源
  + 线程；和其他线程共享内存地址空间，文件等资源

## 文件系统与IO
+ 文件的本质是字节流
+ 文件与文件指针
+ 缓存与缓冲区

## 源代码到程序
+ 源代码 -> tokens
+ tokens -> AST
+ AST -> 字节码(or 平台相关的目标代码)65